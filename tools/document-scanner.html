<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document Scanner</title><link rel="stylesheet" href="../style.css"><style>.container{max-width:780px;margin:36px auto;background:#fff;padding:22px;border-radius:12px;color:#0b1220;box-shadow:0 8px 30px rgba(2,6,23,0.06);text-align:center}input[type=file]{border-radius:8px;margin-top:12px}.btn{background:linear-gradient(90deg,#00e0ff,#60f0d5);border:0;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700;margin-top:12px}video{max-width:100%;border-radius:12px;margin-top:12px}</style></head><body><div class="container"><h2>Document Scanner</h2><p>Upload images or use your camera to scan documents and generate a PDF.</p><input type="file" id="files" accept="image/*" multiple><br><video id="camera" autoplay playsinline style="display:none;"></video><div style="margin-top:10px"><button class="btn" id="cameraBtn">Use Camera</button> <button class="btn" id="scanBtn">Generate PDF</button></div><div id="previewContainer"></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script><script>const { jsPDF } = window.jspdf;let cameraStream;document.getElementById('cameraBtn').addEventListener('click', async ()=>{const video=document.getElementById('camera'); if(!cameraStream){try{cameraStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});video.srcObject=cameraStream;video.style.display='block';document.getElementById('cameraBtn').textContent='Capture Photo';}catch(e){alert('Camera access denied');return;}} else {const canvas=document.createElement('canvas');canvas.width=video.videoWidth;canvas.height=video.videoHeight;canvas.getContext('2d').drawImage(video,0,0);const dataURL=canvas.toDataURL('image/png');const blob=await (await fetch(dataURL)).blob();const dt=new DataTransfer();dt.items.add(new File([blob],'camera.png',{type:'image/png'}));document.getElementById('files').files=dt.files;alert('Photo captured! Ready to generate PDF.');}});document.getElementById('scanBtn').addEventListener('click', async ()=>{const files=document.getElementById('files').files; if(!files.length){alert('Select images first');return;} const pdf=new jsPDF({ unit:'pt', format:'a4' }); for(let i=0;i<files.length;i++){const file=files[i]; const dataURL=await new Promise((res,rej)=>{const reader=new FileReader();reader.onload=e=>res(e.target.result);reader.onerror=rej;reader.readAsDataURL(file);}); const img=new Image(); img.src=dataURL; await new Promise(r=>img.onload=r); const pageW=pdf.internal.pageSize.getWidth(); const pageH=pdf.internal.pageSize.getHeight(); const ratio=Math.min(pageW/img.width, pageH/img.height); const w=img.width*ratio; const h=img.height*ratio; const x=(pageW-w)/2; const y=(pageH-h)/2; if(i>0) pdf.addPage(); const type=dataURL.indexOf('image/png')!==-1?'PNG':'JPEG'; pdf.addImage(dataURL,type,x,y,w,h);} pdf.save('Document.pdf');});</script></body></html>